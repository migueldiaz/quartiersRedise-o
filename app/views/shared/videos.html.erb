<script>
	function despliega_categoria(nombre_categoria){
		var width_actual;
		var width_demas;
		var height_actual;
		var biblioteca_categoria_parent=nombre_categoria.parent();
		
	if(biblioteca_categoria_parent.data('desplegado')){
		
	 biblioteca_categoria_parent.data('desplegado',false);
	 width_actual=90/$(".nombre_biblioteca_categoria").size();
	 width_demas=width_actual;
 	 height_actual='100px';
	}else{
		console.log(biblioteca_categoria_parent.data('desplegado'));
	 biblioteca_categoria_parent.data('desplegado', true);
 	 height_actual='70%';
 	 width_actual=85;
	 width_demas=5/$(".nombre_biblioteca_categoria").size();

	}
	// nombre_categoria.append(". Desplegado: "+biblioteca_categoria_parent.data('desplegado'));
	$.each($(".nombre_biblioteca_categoria"), 
		function(){
		if($(this).text() != nombre_categoria.text() ){
		$(this).parent().animate({ width: width_demas+'%'}, 500);
		$(this).parent().animate({ height: '100px'}, 500);
		}else{
		nombre_categoria.parent().animate({ width: width_actual+'%'}, 1000);
		nombre_categoria.parent().animate({
			height: height_actual
		},1000);
		}
	}
	);
	//modulo.find('.descripcion').show('slow');
	}
	
</script>

<h1><%=t('videos').capitalize+': '+t(proy)%></h1>

<%= render :partial =>'busquedas/buscar_videos', :locals=>{:proyecto=>proy}%>

<%if params[:search]%>
<p><%=t('resultado')+': '+@resultado.size.to_s+' '+t('entradas')+' . ' %><%=link_to t('destroy')+' '+'busqueda',send(proy+"_videos_path")%></p>
<% @videos.each do |video|%>
 		<p>		
 		<%=render :inline=>video.html%><br/>
			<b><%=video.send(:titulo.to_s+locale.to_s)%></b>
			<%=t('sito')%> <%=link_to video.pagina.send(:titulo.to_s+locale.to_s),send(proy+"_pagina_path",:id=>video.pagina.id)%></li>
		
		
		
		</p>
<%end%>
<%= will_paginate @videos %>

<%else%>
<h4>** <%=t('intro_biblioteca')%></h4>
<!-- NO HAY BUSQUEDA! -->
<%

valores=Hash.new
@videos.each do |video|

if valores[video.tipo]==nil then
	valores[video.tipo]=Array.new
end
	valores[video.tipo].push video
end


%>


<% 
tipos_as.sort {|a,b| a[1] <=> b[1]}.each do |video|
v=valores[video[1]]
if(!v.nil?)
%>
<div class='biblioteca_categoria' onclick="despliega_categoria($(this).find('.nombre_biblioteca_categoria'));">
<div class="nombre_biblioteca_categoria" >
<h3><%=dameNombre(video[1],tipos_as)%></h3>
</div>
<div class="descripcion">
<ul>
<% v.each do |dd|%>
<%= render :partial => "/documentos/video_de_lista", :locals => {
:dd=>dd,
:pathito=>send((dame_proyecto dd.pagina)+"_pagina_path",:id=>dd.pagina)
}
%>
<%end%>
</ul>
</div>		
</div>

<%end%>
<%end%>
<%end%>