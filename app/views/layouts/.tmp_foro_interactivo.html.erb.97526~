<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
 <title>FORO INTERACTIVO</title>


<%= javascript_include_tag('processing-1.3.6') %>          
<%= javascript_include_tag('toxiclibs') %>          
<%= javascript_include_tag('jquery-1.7.1') %>          

  <%= csrf_meta_tag %>

 <script type="text/javascript">
 	 var Request = {	
 	parameter: function(name) {
 		return this.parameters()[name];
 	},
 	
 	parameters: function() {
 		var result = {};
 		var url = window.location.href;
 		var parameters = url.slice(url.indexOf('?') + 1).split('&');
 		
 		for(var i = 0;  i < parameters.length; i++) {
 			var parameter = parameters[i].split('=');
 			result[parameter[0]] = parameter[1];
 		}
 		return result;
 	}
 }
					function drawSomeText(id) {
						var pjs = Processing.getInstanceById(id);
							pjs.reset();
						}
					function openModal(ide, usuario, texto){
					//	console.log(usuario);
						$('#comentario_anterior').html(usuario+'<br>'+texto+"...");
						$('#comentario').val('');

						//  $('#mask').click(function () {
						//        $(this).hide();
						//        $('.window').hide();
						//    });         
							   var id = "#dialog";
        //Get the screen height and width
        var maskHeight = $(document).height();
        var maskWidth = $(window).width();
     
        //Set height and width to mask to fill up the whole screen
        $('#mask').css({'width':maskWidth,'height':maskHeight});
         
        //transition effect     
        $('#mask').fadeIn(1000);    
        $('#mask').fadeTo("slow",0.8);  
     
        //Get the window height and width
        var winH = $(window).height();
        var winW = $(window).width();
               
        //Set the popup window to center
        $(id).css('top',  winH/2-$(id).height()/2);
        $(id).css('left', winW/2-$(id).width()/2);
     
        //transition effect
        $(id).fadeIn(2000); 
     
  
						}

 $(document).ready(function () {
 $('.window .close').click(function (e) {
						        //Cancel the link behavior
						        e.preventDefault();
						        $('#mask, .window').hide();
						    });    
						  $('.window .enviar').click(oki);
						  function oki(e) {
						        //Cancel the link behavior
						        e.preventDefault();
						       // alert('enviando!'+$('#comentario').val());
							    if($('#comentario').val()==''){
							    alert('debe rellenar el texto del comentario \n doivent remplir le texte commenter');
							   }else{
						        var pjs = Processing.getInstanceById('foro_interactivo');
						        pjs.newComentario( $('#comentario').val());
						        $('#mask, .window').hide();
								}
								return false;
						    }    

});


						
</script>
    <style>
 
/* Z-index of #mask must lower than #boxes .window */
#mask {
  position:absolute;
  z-index:9000;
  background-color:gray;
  display:none;
}
   
#boxes .window {
  position:absolute;
  width:440px;
  height:200px;
  display:none;
  z-index:9999;
  padding:20px;
}
 
/* Customize your modal window here, you can add background image too */
#boxes #dialog {
  width:100%; 
  height:100%;
}
</style>

</head>
<body>
<div id="boxes">
 
     
    <!-- #customize your modal window here -->
 
    <div id="dialog" class="window">
         <form id="formulario">
         <b>Respondiendo a:</b>
         <div id="comentario_anterior" style="width:80%;overflow:auto;height:130px">  </div>
		 <hr>
         <textarea id="comentario" rows="15" cols="90">escribe aqui tu comentario</textarea><br>
         </form>
        <!-- close button is defined as close class -->
        <a href="#" class="close" style="color:white;background-color:black; padding:5px;">Cerrar</a>
        &nbsp;&nbsp;
        <a href="#" class="enviar" style="color:white;background-color:black; padding:5px;">Enviar</a>
 
    </div>
 
    <!-- Do not remove div#mask, because you'll need it to fill the whole screen --> 
    <div id="mask"></div>
</div>
<canvas id="foro_interactivo" 
data-processing-sources="../p5s/foro_interactivo.pde ../p5s/log.pde ../p5s/rectangulo.pde ../p5s/equipo.pde ../p5s/servicio_toxi_color.pde 
../p5s/model/reticula_ret.pde 
../p5s/model/fila_ret.pde 
../p5s/model/col_ret.pde 
../p5s/model/celda_ret.pde 
../p5s/ajax/refresco.pde 
../p5s/textos/rectangle_con_texto.pde 
../p5s/interfaces/elemento_reticula_abstract.pde 
../p5s/interfaces/displayable.pde 
../p5s/ui/navegador_usuarios.pde 
../p5s/ui/navegador_tamanyos.pde 
../p5s/ui/navegador_temporal_comentarios.pde 
../p5s/forum/servicio_load_equipos.pde 
../p5s/forum/servicio_load_foros_XML.pde 
../p5s/forum/servicio_load_equipos_XML.pde 
../p5s/forum/servicio_mensajes.pde 
../p5s/calculos/calculo_profundidad_columna.pde 
../p5s/calculos/redimensionador_posicionador_elementos.pde 
../p5s/calculos/marca_posicion.pde 
../p5s/calculos/calculo_recursivo.pde 
../p5s/calculos/calculo_unidades_por_posicion_de_modulo.pde 
../p5s/calculos/calculo_marcas.pde 
../p5s/calculos/calculo_children_sel.pde 
../p5s/calculos/resultado_busca_selda_seleccion.pde 
../p5s/usuario.pde 
../p5s/comentario_foro.pde"></canvas>  
<!--  
<a href="#" onclick="drawSomeText('foro_interactivo')" text="lanza" >jolin</a>
-->  
</body>
</html>
